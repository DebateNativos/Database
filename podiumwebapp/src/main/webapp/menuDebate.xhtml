<?xml version='1.0' encoding='UTF-8' ?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <title>PODIUM</title>
        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />
        <!-- Bootstrap 3.3.5 -->
        <h:outputStylesheet library="bootstrap" name="css/bootstrap.min.css"/>


        <h:outputStylesheet library="css" name="ionicons.min.css"/>
        <!-- Theme style -->
        <h:outputStylesheet library="dist" name="css/AdminLTE.min.css"/>
        <!-- AdminLTE Skins. Choose a skin from the css/skins
             folder instead of downloading all of them to reduce the load. -->
        <h:outputStylesheet library="dist" name="css/skins/_all-skins.min.css"/>
        <!-- iCheck -->
        <h:outputStylesheet library="plugins" name="iCheck/flat/blue.css"/>
        <!-- jvectormap -->
        <h:outputStylesheet library="plugins" name="jvectormap/jquery-jvectormap-1.2.2.css"/>


        <h:outputStylesheet library="plugins" name="bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css"/>
        <h:outputStylesheet library="css" name="nprogress.css"/>
        <style type="text/css">
            div[id="growl_container"] {
                top: 60px;
                z-index:1001; 
            }
            div[id="growl_container"] {
                position:absolute;
                top:60px;
                z-index:1001;
            }

            ::-webkit-scrollbar {
                width: 8px;
            }
            ::-webkit-scrollbar-button {
                width: 8px;
                height:5px;
            }
            ::-webkit-scrollbar-track {
                background:#eee;
                border: thin solid lightgray;
                box-shadow: 0px 0px 3px #3c8dbc inset;
                border-radius:10px;
            }
            ::-webkit-scrollbar-thumb {
                background:#3c8dbc;
                border: thin solid #3c8dbc;
                border-radius:10px;
            }
            ::-webkit-scrollbar-thumb:hover {
                background:#3c8dbc;
            }

        </style>

        <h:outputScript library="scripts" name="pfcrud.js"/>
        <h:outputStylesheet library="css" name="pfcrud.css"/>
    </h:head>

    <h:body class="hold-transition skin-blue sidebar-mini">

        <p:growl id="growl" life="3000"/>

        <p:dialog appendTo="@(body)" modal="true" resizable="false" closable="false" header="H" widgetVar="Loading" width="300">
            <center>
                <p:graphicImage value=""/>
            </center>
        </p:dialog>

        <ui:include src="Profile.xhtml"/>

        <p:dialog appendTo="@(body)" resizable="false" header="test" widgetVar="Chat" responsive="true" position="right,bottom" width="400px">
            <div class="col-md-12">
                <!-- DIRECT CHAT -->

            </div><!-- /.col -->
        </p:dialog>

        <div class="wrapper">

            <header class="main-header">
                <!-- Logo -->
                <a href="menuPrincipal.xhtml" class="logo">
                    <!-- mini logo for sidebar mini 50x50 pixels -->
                    <span class="logo-mini"><h3 style="font-size: 25px; font-weight: bold; align-content: center;">P</h3></span>
                    <!-- logo for regular state and mobile devices -->
                    <span class="logo-m"><h:graphicImage library="images" name="logo.png" /></span>
                </a>
                <!-- Header Navbar: style can be found in header.less -->
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                    <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                        <span class="sr-only">Toggle navigation</span>
                    </a>
                    <div class="navbar-custom-menu">
                        <ul class="nav navbar-nav">



                            <!-- User Account: style can be found in dropdown.less -->
                            <li class="dropdown user user-menu">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <h:graphicImage library="dist" name="img/avatar2.png" class="user-image" alt="User Image"/>
                                    <span class="hidden-xs"></span>
                                </a>
                                <ul class="dropdown-menu">
                                    <!-- User image -->
                                    <li class="user-header">
                                        <h:graphicImage library="dist" name="img/avatar2.png" class="img-circle" alt="User Image"/>
                                        <p>
                                            <!-- Devolver aquí el usuario logeado-->
                                            #{login.user.name} #{login.user.lastName}
                                            <small>-Administrador-</small>
                                        </p>
                                    </li>
                                    <!-- Menu Body -->

                                    <li class="user-footer">
                                        <div class="pull-left">
                                            <!--                                            <a href="#" class="btn btn-default btn-flat">Profile</a>-->
                                            <h:form>
                                                <p:commandLink value="Ver perfil" styleClass="btn btn-default btn-flat" onclick="PF('ProfileDialog').show()"/>
                                            </h:form>
                                        </div>
                                        <div class="pull-right">
                                            <h:form>
                                                <p:commandLink style="color: white" value="Cerrar sesión" styleClass="btn btn-default btn-flat" action="#{login.logout()}">
                                                    <i class="fa fa-sign-out fa-lg"></i>

                                                </p:commandLink>
                                            </h:form>
                                        </div>
                                    </li>

                                </ul>

                            </li>
                            <!-- Control Sidebar Toggle Button -->
                            <li>
                                <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </header>
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar">
                <h:form>
                    <!-- sidebar: style can be found in sidebar.less -->
                    <section class="sidebar" id="sidebar">
                        <!-- Sidebar user panel -->
                        <div class="user-panel">
                            <div class="pull-left image">
                                <h:graphicImage library="dist" name="img/avatar2.png" class="img-circle" alt="User Image"/>
                            </div>
                            <div class="pull-left info">
                                <p></p>
                                <a href="#" style="text-align: center; font-size: 12px; font-weight: bold" >PODIUM</a>
                            </div>
                        </div>
                        <ul class="sidebar-menu" id="sidebar-menu" style="height: 80%;width: 100%">
                            <li class="header" id="liHeader">Menú</li>
                            <h:panelGroup id="menuListGroup" class="sidebar-menu">
                                <ui:fragment >
                                    <li class="treeview" id="mainTree">
                                        <ui:fragment >
                                            <a >
                                                <i class="fa fa-university" style="color:"></i>
                                                <span>
                                                    Debates
                                                </span>
                                                <i class="fa fa-angle-left pull-right"></i>
                                            </a>

                                            <ul class="treeview-menu">

                                                <ui:fragment >

                                                    <li >
                                                        <a href="menuStage.xhtml">
                                                            <i class="fa fa-file-text"></i>
                                                            Tipos de debates
                                                            <small class="label pull-right bg-aqua"></small>
                                                        </a>
                                                    </li>      

                                                </ui:fragment>      


                                                <ui:fragment >

                                                    <li >
                                                        <a href="menuDebate.xhtml">
                                                            <i class="fa fa-copy"></i>
                                                            Debates
                                                            <small class="label pull-right bg-aqua"></small>
                                                        </a>
                                                    </li>      

                                                </ui:fragment>      



                                            </ul>
                                        </ui:fragment>      
                                    </li>
                                </ui:fragment>
                                <ui:fragment >
                                    <li class="treeview" id="mainTree">
                                        <ui:fragment >
                                            <a href="menuUser.xhtml">
                                                <i class="fa fa-users" style="color:"></i>
                                                <span>
                                                    Usuarios
                                                </span>

                                            </a>
                                        </ui:fragment>

                                    </li>
                                </ui:fragment>
                                <ui:fragment >
                                    <li class="treeview" id="mainTree">
                                        <ui:fragment >
                                            <a href="menuCourse.xhtml">
                                                <i class="fa fa-clipboard" style="color:"></i>
                                                <span>
                                                    Cursos
                                                </span>

                                            </a>
                                        </ui:fragment>

                                    </li>
                                </ui:fragment>


                            </h:panelGroup>
                        </ul>

                    </section>
                    <!-- /.sidebar -->
                </h:form>
            </aside>



            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                <!-- Content Header (Page header) -->
                <section class="content-header">

                    <h1>
                        Debates
                        <small>Panel de control de debates</small>
                    </h1>
                    <h:panelGroup id="myDashBoard" class="breadcrumb">
                        <ol class="breadcrumb">

                            <li><a href="menuPrincipal.xhtml"><i class="fa fa-arrow-left"></i>Página Principal</a></li>

                            <li class="active">Debate</li>

                        </ol>

                    </h:panelGroup>
                </section>

                <!-- Main content -->
                <section class="content">
                    <!--                    <ui:insert name="body"/>                   -->
                    <div class="container">

                        <h:panelGroup id="myPanel" layout="block">
                            <div class="ui-g-1 ui-md-1 ui-lg-1"></div>
                            <div class="ui-g-10 ui-md-10 ui-lg-10">    
                                <!-- pop up de agregar-->
                                <p:dialog id="debateDlg"  widgetVar="DebateDialog" modal="true" appendTo="@(body)" resizable="true"  header="Nuevo">
                                    <h:form id="DebateForm">
                                        <p:panelGrid columns="2">

                                            <p:outputLabel value="Nombre" for="name" />
                                            <p:inputText id="name" value="#{debateBean.name}"  required="true" requiredMessage="Debe ingresar la información correcta" size="45" maxlength="45"/>

                                       
                                            <h:outputLabel for="time" value="Fecha:" />
                                            <h:outputText id="time" value="#{debateBean.startingDate}">
                                                <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                            </h:outputText>
                                            
                                            
                                            <p:outputLabel for="debatetype" value="Tipo de debate: " />
                                            <p:selectOneMenu id="debatetype" value="#{debatetypeBean.typeD}" effect="fold">
                                                <f:selectItem itemLabel="Seleccione uno" itemValue="" />                                       
                                                <f:selectItems value="#{debatetypeBean.types}" var="typeD" itemLabel="#{typeD.name}" itemValue="#{typeD}" />
                                            </p:selectOneMenu>
                                            
                                            <p:outputLabel for="course1" value="1º curso: " />
                                                <p:selectOneMenu id="course1" value="#{debateBean.course1}" panelStyle="width:180px"
                                                                 effect="fade" var="t" style="width:160px">
                                                    <f:selectItems value="#{courseBean.courses}" var="course1" itemLabel="#{course1.name}" itemValue="#{course1}"/>
                                                </p:selectOneMenu>

                                                <p:outputLabel for="course2" value="2º curso: " />
                                                <p:selectOneMenu id="course2" value="#{debateBean.course2}" panelStyle="width:180px"
                                                                 effect="fade" var="t" style="width:160px">
                                                    <f:selectItems value="#{courseBean.courses}" var="course2" itemLabel="#{course2.name}" itemValue="#{course2}"/>
                                                </p:selectOneMenu>

                                            <f:facet name="footer" >
                                                <div class="footer-right">
                                                    <p:commandButton icon="fa fa-list" styleClass="btn-success" value="Agregar" actionListener="#{debateBean.newDeb}" update=":debform:dataList" onsuccess="PF('DebateDialog').hide()" />
                                                    <p:commandButton icon="fa fa-close" styleClass="btn-danger" value="Cancelar" onclick="PF('UserDialog').hide()"  />
                                                </div>
                                            </f:facet>
                                        </p:panelGrid>
                                    </h:form>
                                </p:dialog>


                                <h:form id="debform">
                                    <p:growl id="msgs" showDetail="true" />

                                    <p:dataTable id="dataList" var="debate" value="#{debateBean.debates}" widgetVar="dataTable" style="display:block; font: serif; font-size: 8px;" emptyMessage="No existe"  paginator="true" rows="6" editable="true" selectionMode="single" selection="#{debateBean.selectedDebate}" rowKey="#{debate.idDebates}"  >

                                        <f:facet name="header" >
                                            <p:commandButton id="toggler" type="button"  icon="ui-icon-calculator" style="float:right; width: 10px; height: 10px;" class="btn-primary"  />
                                            <p:columnToggler datasource="dataList" trigger="toggler" />
                                            <h:outputText value="Debates"/>
                                        </f:facet>

                                        <p:column headerText="Identificador:" sortBy="#{debate.idDebates}" filterBy="#{debate.idDebates}"   filterMatchMode="contains" style=" height: 2%;" visible="false">
                                            <h:outputText value="#{debate.idDebates}" />
                                        </p:column>

                                        <p:column headerText="Fecha del debate:" sortBy="#{debate.startingDate}" filterBy="#{debate.startingDate}"   filterMatchMode="contains" style=" height: 2%;">
                                            <h:outputText value="#{debate.startingDate}" />
                                        </p:column>

                                        <p:column headerText="Nombre" sortBy="#{debate.startingDate}" filterBy="#{debate.startingDate}"   filterMatchMode="contains">
                                            <h:outputText value="#{debate.name}" />
                                        </p:column>

                                        <p:column headerText="Activo" sortBy="#{login.activeDebate(debate)}" filterBy="#{login.activeDebate(debate)}"   filterMatchMode="contains">
                                            <h:outputText value="#{login.activeDebate(debate)}" />
                                        </p:column>

                                        <p:column headerText="Type" sortBy="#{debate.debateType.name}" filterBy="#{debate.debateType.name}"   filterMatchMode="contains">
                                            <h:outputText value="#{debate.debateType.name}" />
                                        </p:column>

                                        <f:facet name="footer">

                                            <p:commandButton styleClass="btn-success" icon="fa fa-list"  value="Agregar"  onclick="PF('DebateDialog').show();" update=":debateform" type="button" ajax="true"/>
                                            <p:commandButton styleClass="btn-primary" icon="fa fa-pencil" value="Editar"  onclick="PF('EditDebateDialog').show();" update=":debateEdit:editDetail" />

                                            <p:commandButton styleClass="btn-warning" icon="fa fa-check-circle-o" value="Activar" />
                                            <p:commandButton value="Eliminar" icon="fa fa-trash"  actionListener="#{debateBean.buttonDisable}" update=":debform:dataList" styleClass="btn-danger">
                                                <p:confirm header="Confirmación" message="¿Desea eleminar el debate?" icon="ui-icon-alert" />
                                            </p:commandButton>

                                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                                            </p:confirmDialog>
                                        </f:facet>
                                    </p:dataTable>

                                </h:form>

                                <p:dialog id="editDlg" header="Editar" widgetVar="EditDebateDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="true" >
                                    <h:form id="debateEdit">         
                                        <p:outputPanel id="editDetail" style="text-align:center;">
                                            <p:panelGrid  columns="2" >
                                                <f:facet name="header">
                                                    <h1>Debate</h1>
                                                </f:facet>
                                                <p:outputLabel value="Nombre" for="firstName" />
                                                <p:inplace id="firstName" editor="true">
                                                    <p:inputText  value="#{debateBean.selectedDebate.name}"  required="true" requiredMessage="Debe ingresar la información correcta" size="45" maxlength="45"/>
                                                </p:inplace>

                                                <h:outputLabel for="time" value="Fecha:" />
                                                 <p:inplace id="time" editor="true">   
                                                    <h:outputText  value="#{debateBean.startingDate}">
                                                        <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                                    </h:outputText>
                                                </p:inplace>

                                                <p:outputLabel for="debateT" value="Tipo de debate: " />
                                                <p:selectOneMenu id="debateT" value="#{debateBean.debateType}" panelStyle="width:180px"
                                                                 effect="fade" var="t" style="width:160px" filter="true" filterMatchMode="startsWith">
                                                    <f:selectItems value="#{debatetypeBean.types}" var="debateT" itemLabel="#{debateT.name}" itemValue="#{debateT}"/>
                                                </p:selectOneMenu>

                                                <p:outputLabel for="course1" value="1º curso: " />
                                                <p:selectOneMenu id="course1" value="#{debateBean.course1}" panelStyle="width:180px"
                                                                 effect="fade" var="t" style="width:160px">
                                                    <f:selectItems value="#{courseBean.courses}" var="course1" itemLabel="#{course1.name}" itemValue="#{course1}"/>
                                                </p:selectOneMenu>

                                                <p:outputLabel for="course2" value="2º curso: " />
                                                <p:selectOneMenu id="course2" value="#{debateBean.course2}" panelStyle="width:180px"
                                                                 effect="fade" var="t" style="width:160px">
                                                    <f:selectItems value="#{courseBean.courses}" var="course2" itemLabel="#{course2.name}" itemValue="#{course2}"/>
                                                </p:selectOneMenu>

                                                <f:facet name="footer" >
                                                    <div class="footer-right">
                                                        <p:commandButton icon="fa fa-list" styleClass="btn-success" value="Editar" actionListener="#{debateBean.editDeb}" update=":debform:dataList" onsuccess="PF('EditDebateDialog').hide()"  />
                                                        <p:commandButton icon="fa fa-close" styleClass="btn-danger" value="Cancelar" onclick="PF('EditDebateDialog').hide()"/>
                                                    </div>
                                                </f:facet>
                                            </p:panelGrid>

                                        </p:outputPanel>
                                    </h:form>
                                </p:dialog>




                            </div>
                            <div class="ui-g-1 ui-md-1 ui-lg-1"></div>

                            <div class="ui-g-12 ui-md-12 ui-lg-12">

                                <center>
                                    <h:form>
                                        <p:panelGrid columns="2">
                                            <f:facet name="header">
                                                Debate activo
                                            </f:facet>

                                            <h:outputText value="Nombre:" />
                                            <h:outputText value="" />

                                            <h:outputText value="Fecha:" />
                                            <h:outputText value="" />

                                            <h:outputText value="Hora:" />
                                            <h:outputText value="" />

                                            <f:facet name="footer">
                                                <p:commandLink class="small-box-footer" action="menuTime.xhtml" >
                                                    Adminitrar debate activo<i class="fa fa-arrow-circle-right"></i> 
                                                </p:commandLink>
                                            </f:facet>

                                        </p:panelGrid> 
                                    </h:form>
                                </center> 
                            </div>
                        </h:panelGroup>

                    </div>

                </section>
            </div><!-- /.content-wrapper -->

            <!-- Control Sidebar -->
            <aside class="control-sidebar control-sidebar-dark">
                <!-- Tab panes -->
                <div class="tab-content">
                    <!-- Home tab content -->
                    <div class="tab-pane" id="control-sidebar-home-tab">


                        <h3 class="control-sidebar-heading">Tasks Progress</h3>
                        <ul class="control-sidebar-menu">

                            <li>
                                <a href="javascript::;">
                                    <h4 class="control-sidebar-subheading">
                                        Laravel Integration
                                        <span class="label label-warning pull-right">50%</span>
                                    </h4>
                                    <div class="progress progress-xxs">
                                        <div class="progress-bar progress-bar-warning" style="width: 50%"></div>
                                    </div>
                                </a>
                            </li>
                        </ul><!-- /.control-sidebar-menu -->

                    </div><!-- /.tab-pane -->

                </div>
            </aside>

            <!-- Add the sidebar's background. This div must be placed
                 immediately after the control sidebar -->
            <div class="control-sidebar-bg"></div>
        </div>
        <!-- ################################################################################ -->
        <h:outputScript library="bootstrap" name="js/bootstrap.min.js"/>
        <h:outputScript library="dist" name="js/app.js"/>
        <h:outputScript library="dist" name="js/demo.js"/>
        <h:outputScript library="scripts" name="nprogress.js"/>

        <script type="text/javascript">

            function start() {
                var cssClass = $("body").attr("class");
                NProgress.start(cssClass);
            }

            function finish() {
                NProgress.done();
            }

        </script>

        <!-- Page Loading Effect -->
        <script>var HN = [];
            HN.factory = function (e) {
                return function () {
                    HN.push([e].concat(Array.prototype.slice.call(arguments, 0)))
                };
            }, HN.on = HN.factory("on"), HN.once = HN.factory("once"), HN.off = HN.factory("off"), HN.emit = HN.factory("emit"), HN.load = function () {
                var e = "hn-button.js";
                if (document.getElementById(e))
                    return;
                var t = document.createElement("script");
                t.id = e, t.src = "//hn-button.herokuapp.com/hn-button.js";
                var n = document.getElementsByTagName("script")[0];
                n.parentNode.insertBefore(t, n)
            }, HN.load();



        </script>
        <!-- Page Loading Effect -->

        <!--        <script type="text/javascript">
        
        //            function resize() {
        //                var height = $(window).height();
        //                var userPanel = $(".user-panel").height();
        //                var mainHeader = $(".main-header").height();
        //                var liHeader = $("#liHeader").height();
        //                var margins = 13;
        //                var total = userPanel + mainHeader + liHeader + margins;
        //                var result = height - total;
        //                result = result + "px";
        //                $("#sidebar-menu").css("height", result);
        //                $("#sidebar-menu").css("overflow-y", "scroll");
        //            }
        
                    $(document).ready(function () {
                        $("#mainTree").addClass("active");
                        //resize();
                    });
        //
        //            $(window).on('resize', function () {
        //                resize();
        //            });
        
                    $(document).ready(function () {
                        $('li').on('click', function () {
                            $(this).siblings().removeClass('active');
                            $(this).addClass('active');
                        });
                    });
        
                </script>-->



    </h:body>
</html>

